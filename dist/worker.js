!function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){const r=n(1);async function s(t){const e=t.url.substring(t.url.lastIndexOf("/")+1),n=await fetch("https://restcountries.eu/rest/v2/name/"+e),r=await n.json();if(404==r.status)return new Response(JSON.stringify({found:!1}),{status:200});const s={code2:r[0].alpha2Code,code3:r[0].alpha3Code,found:!0};return new Response(JSON.stringify(s),{status:200})}async function o(t){const e=t.url.substring(t.url.lastIndexOf("/")+1),n=await fetch("https://www.travel-advisory.info/api?countrycode="+e),r={score:(await n.json()).data[e].advisory.score,maxScore:5};return new Response(JSON.stringify(r),{status:200})}async function a(t){var e=-1,n=t.url;-1!=n.lastIndexOf("?maxlength=")&&(e=parseInt(n.substring(n.lastIndexOf("=")+1)),console.log(e),console.log(n.substring(n.lastIndexOf("=")+1)),n=n.substring(0,t.url.lastIndexOf("?maxlength=")));const r=n.substring(n.lastIndexOf("/")+1),s="/2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,3001,3002,3003,3004,3005,3006,3007,3008,3009,3010,4001,4002,4003,4004,4005,4006,4007,4008,4009,4010";var o;o="help"==r?await fetch("https://reopen.europa.eu/api/covid/v1/eutcdata/data/en/FRA/"+s):await fetch(`https://reopen.europa.eu/api/covid/v1/eutcdata/data/en/${r}/${s}`);const a=await o.json();var i={},u="";return a[0].indicators.forEach((function(t){const n=t.indicator_name.replace(new RegExp('[ |?|,|"|\\(|\\)|”|“|\\.|é|-|/]',"g"),"");var r=t.comment;-1!=e&&(e=parseInt(e),r=r.substr(0,e),r+="..."),i[n]={value:t.value,comment:r},u+=n+"<br>"})),"help"==r?new Response("<html>"+u+"</html>",{status:200,headers:{"Content-Type":"text/html"}}):new Response(JSON.stringify(i),{status:200})}async function i(t){const e=t.url.substring(t.url.lastIndexOf("/")+1),n=await async function(t){const e=await fetch("https://api.covid19api.com/countries"),n=await e.json();for(let e of n)if(e.ISO2==t)return e.Slug;return"france"}(e),r=["confirmed","deaths","recovered"],s={};for(let t of r)s[t+"Delta"]=await u(n,t);return new Response(JSON.stringify(s),{status:200})}async function u(t,e){const n=c(function(){const t=new Date;return t.setDate(t.getDate()-14),t}()),r=c(new Date),s=await fetch(`https://api.covid19api.com/country/${t}/status/${e}?from=${n}&to=${r}`),o=await s.json(),a=o[0].Cases;return o[o.length-1].Cases-a}function c(t){const e=t.toISOString();return e.substring(0,e.indexOf("T"))+"T00:00:00Z"}addEventListener("fetch",t=>{t.respondWith(async function(t){const e=new r;e.get("/hello",()=>new Response("Hello worker!")),e.get("/code/.*",s),e.get("/risk/.*",o),e.get("/status/.*",a),e.get("/statistics/.*",i);return await e.route(t)}(t.request))})},function(t,e){const n=t=>e=>e.method.toLowerCase()===t.toLowerCase(),r=n("connect"),s=n("delete"),o=n("get"),a=n("head"),i=n("options"),u=n("patch"),c=n("post"),l=n("put"),d=n("trace"),f=t=>e=>{const n=new URL(e.url).pathname;return(n.match(t)||[])[0]===n};t.exports=class{constructor(){this.routes=[]}handle(t,e){return this.routes.push({conditions:t,handler:e}),this}connect(t,e){return this.handle([r,f(t)],e)}delete(t,e){return this.handle([s,f(t)],e)}get(t,e){return this.handle([o,f(t)],e)}head(t,e){return this.handle([a,f(t)],e)}options(t,e){return this.handle([i,f(t)],e)}patch(t,e){return this.handle([u,f(t)],e)}post(t,e){return this.handle([c,f(t)],e)}put(t,e){return this.handle([l,f(t)],e)}trace(t,e){return this.handle([d,f(t)],e)}all(t){return this.handle([],t)}route(t){const e=this.resolve(t);return e?e.handler(t):new Response("resource not found",{status:404,statusText:"not found",headers:{"content-type":"text/plain"}})}resolve(t){return this.routes.find(e=>!(e.conditions&&(!Array.isArray(e)||e.conditions.length))||("function"==typeof e.conditions?e.conditions(t):e.conditions.every(e=>e(t))))}}}]);